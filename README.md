# CS-315-Final-Project
## Background:
TikTok has attracted attention due to its considerable influence on adolescent
users. Despite its popularity, concerns linger over the platform’s algorithm,
which tends to surface limited news content, highlighting the challenges of
algorithmic news dissemination and its impact on user engagement with
current events [1]. We aim to delve into the intricate dynamics of digital news
consumption, examining how the availability of news content influences the
interaction between traditional news outlets and alternative news sources.
In our study, we analyze the type of news content TikTok provides to users
actively searching for news using the platform’s search function. Focusing
on the US news audience, we use New York Times article keywords to
query TikTok, then examine the video metadata from both verified and
unverified accounts. Additionally, we classify the transcripts of these videos
as subjective or objective. Our findings reveal that a significant portion of the
news-related videos displayed by TikTok’s search engine exhibit subjective
characteristics in both verified and unverified content. We also find that
search results across different accounts are highly personalized and uniquely
formatted.

# Files in this repo: 

## 1. Pyktok File <br />
2. cd cs-315-final-project/pyktok_code <br />
3. python -m venv .project2  (You'll create a new virtual environment to collect data with pyktok) <br />
4. source .project2/bin/activate (activate it) <br />
5. pip install -r pyktok_code/requirements.txt (will install all packaged you need) <br />

Now you are ready to start collecting data. For you to test, I have included the sample JSON file. But you can use your own JSON file that has the same format. <br />

In the command line: <br />

python3 pyktok-collect.py pyktok_test.json results.csv

Updated what worked for me instead:
python3 pyktok_code/pyktok-collect.py Urls_Run/urls[INSERTYR].json_1.json results.csv

## 2. NYT Data
In the `NYT_Code` folder, there are two files:

- `analyze_NYT.ipynb`: This file analyzes the output from `collect_nyt.ipynb`
- `collect_nyt.ipynb`: This file collects articles from the NYT API

## 3. **compiling_data**
   **Compiling Scraping Results.ipynb: ** This file contains functions that compile the Pyktok-scraped data on each video with the search terms and video transcript.

## 4. **search_results_scraper**
   **Final Search Scraper.ipynb: ** This file contains functions (based on Selenium) that scrape TikTok's search results page for URLs of videos based on the search terms selected using the NYT API.

   **Preliminary Search Scraper.ipynb:** This file contains the code for different approaches to scraping TikTok URLs (including using XPaths) before the Selenium webdriver was chosen for the final scraping. 

## 5. ** Transcription and Subjectivity**
Under the subjectivity folder, you will find files called subjectivity_analysis.ipynb and subjectivity_visualization.ipynb
>  subjectivity_analysis.ipynb: this file will run transcriptions on a local folder with downloaded .mp4 videos and label subjectivity/objectivity analysis
> subjectivity_visualization.ipynb: this file with use the csv files from subjectivity_analysis.ipynb to analyze the data

## 6. **topic_modelling**
   **Topic Modelling.ipynb: ** This notebook contains code for fitting an LDA model to the transcription data and generating visualizations. 
**AI Generated Topic Analysis.ipynb:** This notebook contains code for analyzing the topics generated by OpenAI based on the transcripts of the videos and correlating them with search terms using a word embedding model (not used in the data analysis section of the paper or presentation)

## 7. Verified Accounts
**Final Project Heatmap.ipynb: ** This notebook contains code that generates heatmaps for the verification status of videos on the search results page of TikTok in order of appearance on page for each year from 2020-2024.
**Summary.ipynb: ** This notebook contains code that generates table for the search results that showed the most and least videos from verified accounts, as well as graphs that showed the percentage of videos that were verified for each search term in the years from 2020-2024.

## 8. Comparison Analysis
**Comparison Analysis.ipynb ** this notebook contains code that creates a bar chart that shows the overlap percentage for the search results between 2 weeks. I got my files from 2023 data from last week and a file from 2023 data from this week.  It also contains the Jaccard Index for the search results between the 2 weeks as well.

**comparisonAnalysis_2.ipynb: ** This notebook contains code that generates final files for 2023 data (ran on 2 different machines) from a week after the initial batch of data was collected, as well as analysis of the overlap in videos from TikTok search results on two different machines. There is also code for a heatmap generated to check if different search queries result in the appearance of the same videos.

**timeseries.ipynb** this notebook has code which generates various time series for certain relevant search terms. It maps certain search terms, specifically “Tel Aviv (Israel)” and “Hamas” for our two result search files, one at original collection time and the other 2 weeks later. 



## RUNNING TRANSCRIPTION NOTEBOOK ON A MAC
1. Download ffmpeg-n5.1-latest-linux64-gpl-5.1.tar.xz from this link https://github.com/BtbN/FFmpeg-Builds/releases
2. Unzip and put it into the folder with the notebook
3. go into the folder -> bin -> ffmpeg and put ffmpeg into the same folder with the notebook
4. in the terminal type 
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

5. run the following on the terminal: 
(echo; echo 'eval "$(/opt/homebrew/bin/brew shellenv)"') >> /Users/mirayagupta/.zprofile

6. run ths on the terminal: 
eval "$(/opt/homebrew/bin/brew shellenv)"

7. run this on the terminal (this takes a while)
brew install ffmpeg

8. Now run the notebook
